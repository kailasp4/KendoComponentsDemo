{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","nameToKebab","replace","toLowerCase","registerTool","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editorNS","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","encoded","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","_destroyResizings","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","InsertHtmlCommand","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","RestorePoint","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","left","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","$head","head","append","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","ToolBar","on","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","is","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","getKendoResizable","ignore","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","top","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","plugin","Tool","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","GenericCommand","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","minWidth","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","borderWidth","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResize","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","WIDTH","HEIGHT","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","closeHandler","_dialogTemplate","collectDialogValues","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_cellPropertiesForm","_createCellPropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","check","cellView","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","__meta__","category","description","depends","features"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textarea.js';\nimport './kendo.core.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.form.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.html.button.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        NS = \".kendoEditor\";\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    var NATIVE_TOOLS = [\n        \"insertLineBreak\",\n        \"insertParagraph\",\n        \"redo\",\n        \"undo\",\n        \"autoLink\"\n    ];\n\n    var EditorUtils = {\n        editorWrapperTemplate: () =>\n            '<div class=\"k-editor\">' +\n                '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                '<div class=\"k-editable-area k-editor-content\"></div>' +\n            '</div>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name, icon) {\n            var toolCssClassNames = {\n                superscript: \"supscript\",\n                subscript: \"subscript\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent\",\n                outdent: \"outdent\",\n                createLink: \"link\",\n                unlink: \"unlink\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"code\",\n                foreColor: \"foreground-color\",\n                backColor: \"droplet\",\n                createTable: \"table-add\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-start\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-end\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n\n            if (cssClass) {\n                return cssClass;\n            }\n\n            if (icon) {\n                return icon;\n            }\n\n            return EditorUtils.nameToKebab(name);\n        },\n\n        nameToKebab: function(name) {\n            return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                .replace(/[\\s_]+/g, '-')\n                .toLowerCase();\n        },\n\n        registerTool: function(toolName, tool) {\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            if (!tool.options.ui) {\n                tool.options.ui = {};\n            }\n\n            tool.options.ui.command = toolName;\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n        undo: [\"undo\", \"redo\"],\n        scripts: [\"subscript\", \"superscript\" ],\n        alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n        links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n        lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n        dent: [\"indent\", \"outdent\"],\n        tablesWizard: [\"tableWizard\"],\n        tablesInsert: [\"createTable\"],\n        tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n        tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n        tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                toolbarContainer,\n                type, domElement;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n\n            element = that.element;\n            domElement = element[0];\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarContainer = that._setupType(element);\n\n            that._initToolbar(toolbarContainer);\n            that._setupHeight(type);\n            that._resizable();\n            that._initializeContentElement(that);\n            that._setupKeyboard();\n\n            that.clipboard = new editorNS.Clipboard(this);\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            that._populateValue(options, domElement);\n\n            that._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            navigateOnTab: false,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [\n                \"formatting\",\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"undo\",\n                \"redo\",\n                \"justifyLeft\",\n                \"justifyCenter\",\n                \"justifyRight\",\n                \"copyFormat\",\n                \"applyFormat\",\n                \"insertUnorderedList\",\n                \"insertOrderedList\",\n                \"indent\",\n                \"outdent\",\n                \"createLink\",\n                \"unlink\",\n                \"insertImage\",\n                \"tableWizard\",\n                \"createTable\",\n                \"addRowAbove\",\n                \"addRowBelow\",\n                \"addColumnLeft\",\n                \"addColumnRight\",\n                \"deleteRow\",\n                \"deleteColumn\",\n                \"mergeCellsHorizontally\",\n                \"mergeCellsVertically\",\n                \"splitCellHorizontally\",\n                \"splitCellVertically\",\n                \"tableAlignLeft\",\n                \"tableAlignCenter\",\n                \"tableAlignRight\"\n            ]\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            if (this.windowInstance) {\n                this.windowInstance.destroy();\n            }\n            if (this.tablePopup) {\n                this.tablePopup.destroy();\n            }\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n\n            if (options.tools) {\n                this._setOptionsTools(options.tools);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var defaultTools = kendo.ui.Editor.defaultTools;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.tools[name] || defaultTools[name];\n\n            if (!tool) {\n                Object.keys(defaultTools).map(key => {\n                    if (key.toLowerCase() === name) {\n                        tool = defaultTools[key];\n                    }\n                });\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        state: function(toolName) {\n            var tool = kendo.ui.Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n            this._refreshTools();\n        },\n\n        _bindTools: function() {\n            var that = this,\n                defaultTools = this.tools;\n\n            that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each((i, el) => {\n                    var toolName = el.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName];\n\n                    if (tool && tool.initialize) {\n                        tool.initialize($(el), that);\n                    }\n                });\n\n            that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor._decorateFormatting(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        _decorateFormatting: function(body) {\n            var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                dom = kendo.ui.editor.Dom,\n                component, dataSource, items, i, tag, className, style;\n\n            if (formattingElement.length) {\n                component = formattingElement.getKendoDropDownList();\n                if (!component) {\n                    return;\n                }\n                dataSource = component.dataSource;\n                items = dataSource.data();\n\n                if (body) {\n                    component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || \"span\";\n                    className = items[i].className;\n\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, \"'\");\n\n                    items[i].style = style + \";display:inline-block\";\n                }\n\n                dataSource.trigger(\"change\");\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _handleToolbarClick: function(e) {\n            var toolName = e.target.data(\"command\");\n\n            if (toolName && toolName !== \"createTable\") {\n                this.exec(toolName);\n            }\n        },\n\n        _immutablesContext: function(range) {\n            var editorNS = kendo.ui.editor;\n\n            if (this.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                setTimeout(() => {\n                    editor._decorateFormatting(editor.body);\n                });\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        // To be moved to the Editor\n                        editor._showWindow();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        // All below to be moved to the Editor\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = editor.windowInstance.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                            $(body).removeClass(\"k-active\");\n                            editor._hideWindow();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initToolbar: function(toolbarContainer) {\n            var that = this,\n                tools, defaults, toolbarOptions;\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(that.options.tools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this),\n                navigateOnTab: that.options.navigateOnTab\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n            that.bind(\"select\", that._refreshTools.bind(that));\n\n            toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                e.preventDefault();\n            });\n\n            if (!that.textarea) {\n                that._initToolbarWindow(toolbarContainer);\n            }\n        },\n\n        _initToolbarWindow: function(toolbarEl) {\n            var that = this;\n\n            this.windowInstance = toolbarEl\n                .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                        that.toolbar.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _populateValue: function(options, domElement) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                value, comments;\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n        },\n\n        _resetGroups: function(current) {\n            var result = {};\n\n            Object.keys(current).map(key => {\n                result[key + \"_\"] = current[key];\n            });\n\n            return result;\n        },\n\n        _processToolbarItems: function(optionsTools) {\n            var flatDefaultTools = {},\n                processedObject = {},\n                tools = [],\n                currentGroups = $.extend(true, {}, toolGroups),\n                i, j, t, name, guidGroupName;\n\n            for (i = 0; i < optionsTools.length; i++) {\n                t = optionsTools[i];\n\n                if (Array.isArray(t)) {\n                    guidGroupName = kendo.guid();\n\n                    for (j = 0; j < t.length; j++) {\n                        [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        }\n\n                        flatDefaultTools[name].gr = guidGroupName;\n                    }\n                } else {\n                    [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                    if (!name) {\n                        continue;\n                    } else if (name === \"separator\") {\n                        currentGroups = this._resetGroups(currentGroups);\n                    }\n\n                    Object.keys(currentGroups).map(key => {\n                        var group = currentGroups[key];\n\n                        if (group.includes(name)) {\n                            flatDefaultTools[name].gr = key;\n                        }\n                    });\n                }\n            }\n\n            Object.values(flatDefaultTools).map((tool) => {\n                var group = tool.gr;\n\n                delete tool.gr;\n\n                if (group === undefined$1) {\n                    processedObject[tool.name] = tool;\n                } else {\n                    if (!processedObject[group]) {\n                        processedObject[group] = [];\n                    }\n\n                    processedObject[group].push(tool);\n                }\n            });\n\n            tools = Object.values(processedObject).map((g) => {\n                var result;\n\n                if (g.length) {\n                    result = g.map((to) => to.name);\n                } else {\n                    result = g.name;\n                }\n\n                if (result.length === 1) {\n                    result = result[0];\n                }\n\n                return result;\n            });\n\n            return [tools, flatDefaultTools];\n        },\n\n        _processDefaultTool: function(tool, defaultTools) {\n            var name = tool.name,\n                result = {},\n                options;\n\n            if ($.isPlainObject(tool)) {\n                if (name && defaultTools[name]) {\n                    // configured tool\n                    result = extend({}, defaultTools[name]);\n                    extend(result.options, tool);\n                } else {\n                    // custom tool\n                    options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                    if (!options.name) {\n                        options.name = \"custom\";\n                    }\n\n                    options.cssClass = \"k-\" + options.name;\n\n                    result = {\n                        options: options\n                    };\n\n                    name = options.name;\n                }\n            } else if (defaultTools[tool]) {\n                name = tool;\n                result = defaultTools[name];\n            } else {\n                return null;\n            }\n\n            this.tools[name] = result;\n\n            return result;\n        },\n\n        _processToolOptions: function(t, flatDefaultTools) {\n            var that = this,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, palette;\n\n            tool = this._processDefaultTool(t, defaultTools);\n\n            if (!tool) {\n                return [flatDefaultTools, null];\n            }\n\n            options = tool.options;\n            name = options.name;\n            uiOptions = options.ui || {};\n            icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n            toolOptions = $.extend({\n                name: options.name,\n                command: options.command,\n                template: options.template,\n                type: \"button\",\n                icon: icon,\n                showText: \"overflow\",\n                showIcon: \"both\"\n            }, uiOptions);\n\n            if (options.tooltip) {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes.title = options.tooltip;\n            }\n            if (options.exec) {\n                toolOptions.click = options.exec.bind(that);\n                delete toolOptions.exec;\n            }\n            if (toolOptions.component === \"ColorPicker\") {\n                if (options.palette || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                    palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                    view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                    toolOptions.componentOptions.palette = palette;\n                    toolOptions.componentOptions.views = [view];\n                    toolOptions.componentOptions.preview = view === \"gradient\";\n                    toolOptions.componentOptions.input = view === \"gradient\";\n                    toolOptions.componentOptions.buttons = view === \"gradient\";\n                }\n                if (toolOptions.columns) {\n                    toolOptions.componentOptions.columns = options.columns;\n                }\n            }\n\n            if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                if (!toolOptions.componentOptions) {\n                    toolOptions.componentOptions = {};\n                }\n\n                if (!toolOptions.componentOptions.dataSource) {\n                    toolOptions.componentOptions.dataSource = that.options[name] || options.items;\n                }\n            }\n            if (toolOptions.template) {\n                delete toolOptions.type;\n            }\n\n            shortcuts = this._shortcutSequence(name);\n\n            if (shortcuts !== \"\") {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n            }\n\n            flatDefaultTools[name] = toolOptions;\n\n            return [flatDefaultTools, name];\n        },\n\n        _refreshTools: function() {\n            var that = this,\n                range = that.getRange(),\n                editorNS = kendo.ui.editor,\n                rangeUtils = editorNS.RangeUtils,\n                nodes = rangeUtils.textNodes(range),\n                immutables = that.options.immutables,\n                immutablesContext = that._immutablesContext(range),\n                defaultTools = that.tools;\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each(function() {\n                    var toolName = this.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName],\n                        ui;\n\n                    if (tool) {\n                        ui = $(this);\n\n                        if (tool.update) {\n                            tool.update(ui, nodes, that.undoRedoStack);\n                        }\n\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _setOptionsTools: function(optionsTools) {\n            var that = this,\n                toolbar = that.toolbar,\n                toolbarContainer = toolbar.element,\n                tools, defaults, toolbarOptions;\n\n            toolbar.destroy();\n            toolbarContainer.empty();\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(optionsTools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this)\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n        },\n\n        _setNativeTools: function() {\n            var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                i;\n\n            for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                if (!this.tools[NATIVE_TOOLS[i]]) {\n                    this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                }\n            }\n        },\n\n        _setupHeight: function(type) {\n            var that = this;\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n        },\n\n        _setupKeyboard: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n        },\n\n        _setupType: function(element) {\n            var domElement = element[0],\n                type = kendo.ui.editor.Dom.name(domElement),\n                id = domElement.id,\n                toolbarContainer;\n\n            if (type == \"textarea\") {\n                this._wrapTextarea();\n\n                toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                if (!id) {\n                    id = kendo.guid();\n                    domElement.setAttribute(\"id\", id);\n                }\n\n                toolbarContainer.attr(\"aria-controls\", id);\n            } else {\n                this.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n                toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n            }\n\n            return toolbarContainer;\n        },\n\n        _shortcutSequence: function(name) {\n            var tool = kendo.ui.Editor.defaultTools[name],\n                res = \"\",\n                options;\n\n            if (!tool || !tool.options) {\n                return res;\n            }\n\n            options = tool.options;\n\n            if (options.ctrl) {\n                res += \"Ctrl+\";\n            }\n\n            if (options.shift) {\n                res += \"Shift+\";\n            }\n\n            if (options.alt) {\n                res += \"Alt+\";\n            }\n\n            if (options.key) {\n                res += options.key;\n            }\n\n            return res;\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _toolbarFocused: function() {\n            var active = kendo._activeElement(),\n                popup = this.windowInstance,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var toolbar = this.toolbar,\n                name = tool.name,\n                uiElement = ui.closest(\".k-toolbar-tool\"),\n                trackImmutables = tool.options.trackImmutables,\n                editorNS = kendo.ui.editor;\n\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                if (immutablesContext) {\n                    toolbar.hide(uiElement);\n                } else {\n                    toolbar.show(uiElement);\n                }\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate(),\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        // Resizing methods\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'>\" + kendo.ui.icon(\"caret-br\") + \"</div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\".k-editable-area\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        // ToolBar Window methods\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.windowInstance.wrapper,\n                editorElement = that.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _hideWindow: function() {\n            if (this.windowInstance) {\n                this.windowInstance.close();\n            }\n        },\n\n        _overlapsWindow: function(box) {\n            var toolbarWrapper = this.windowInstance.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        _showWindow: function() {\n            var that = this,\n                windowInstance = that.windowInstance,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (windowInstance) {\n                wrapper = windowInstance.wrapper;\n                editorElement = that.element;\n\n                if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!windowInstance._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                        setTimeout(function() {\n                            windowInstance.open();\n                        }, 0);\n                    } else {\n                        windowInstance.open();\n                    }\n                }\n            }\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name,\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            switch (name) {\n                case \"undo\":\n                    toolbar.enable(ui, undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    toolbar.enable(ui, undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n\n            ui.removeAttr(\"disabled\");\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = kendo.ui.Editor.defaultTools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor._refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\")\n            .addClass(\"k-editor-window\")\n            .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    },\n\n    _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n        return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n        kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n    '</div>';\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        let window = this.createDialog(dialog, {\n            title: messages.viewHtml,\n            _footerTemplate: ViewHtmlCommand._footerTemplate,\n            _footerMessages: messages,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .data(\"kendoWindow\");\n\n            window.center().open();\n\n            window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n            window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: () =>\n    '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n    '</div>',\n    _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n    `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n        kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n    `</div>`,\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n\n        return new FormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar && ui.getKendoToggleButton()) {\n            toolbar.toggle(ui, isFormatted);\n        }\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    Tool = Editor.Tool,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            widget = ui.data(\"kendoComboBox\"),\n            defaultValue = [];\n\n        if (!widget) {\n            return;\n        }\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n        widget.setDataSource(dataSource);\n\n        widget.bind(\"change\", (e) => {\n            editor._range = range;\n            Tool.exec(editor, toolName, e.sender.value());\n        });\n\n        widget.bind(\"close\", () => {\n            setTimeout(function() {\n                editor._deleteSavedRange();\n            },0);\n        });\n\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var that = this,\n            toolName = that.options.name,\n            component = this._widget = ui.getKendoColorPicker();\n\n        if (!component) {\n            return;\n        }\n\n        component.bind(\"change\", () => {\n            var color = component.value();\n\n            if (color) {\n                Tool.exec(editor, toolName, color);\n            }\n\n            delete that.storedRange;\n            delete that._inputFocused;\n\n            editor.focus();\n        });\n\n        component.bind(\"open\", () => {\n            that.storedRange = editor.getRange();\n\n            component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                if (!$(e.target).is(\"input.k-color-value\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!component._popup.element.is(\"[unselectable='on']\")) {\n                component._popup.element\n                    .attr({ unselectable: \"on\" })\n                    .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                    .end().find(\"input\").on(\"focus\", function() {\n                        that._inputFocused = true;\n                    });\n            }\n\n            component._popup.one(\"activate\", () => {\n                component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n            });\n        });\n\n        component.bind(\"close\", (e) => {\n            component._popup.element.off(MOUSEDOWN_NS);\n        });\n\n        component.unbind(\"activate\").bind(\"activate\", (e) => {\n            if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                return;\n            }\n\n            component.trigger(\"change\");\n        });\n\n        component.wrapper\n            .attr({ unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        component.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({\n    key: \"B\",\n    ctrl: true,\n    format: formats.bold,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({\n    key: \"I\",\n    ctrl: true,\n    format: formats.italic,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({\n    key: \"U\",\n    ctrl: true,\n    format: formats.underline,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({\n    format: formats.strikethrough,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({\n    format: formats.superscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({\n    format: formats.subscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterTool(\"foreColor\", new ColorTool({\n    cssAttr: \"color\",\n    fontAttr: \"color\",\n    domAttr: \"color\",\n    name: \"foreColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"foreground-color\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"backColor\", new ColorTool({\n    cssAttr: \"background-color\",\n    domAttr: \"backgroundColor\",\n    name: \"backColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"droplet\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"fontName\", new FontTool({\n    cssAttr: \"font-family\",\n    fontAttr: \"face\",\n    domAttr: \"fontFamily\",\n    name: \"fontName\",\n    defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"fontSize\", new FontTool({\n    cssAttr: \"font-size\",\n    fontAttr: \"size\",\n    domAttr: \"fontSize\",\n    name: \"fontSize\",\n    defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(\"<div/>\", {\n            title: messages.createLink,\n            minWidth: 340,\n            close: this._close.bind(this),\n            visible: false\n        }).data(\"kendoWindow\");\n\n        this._form = this._createForm(dialog);\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.center().open();\n\n        $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-link-url\",\n                    label: encode(messages.linkWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-text\",\n                    label: encode(messages.linkText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-title\",\n                    label: encode(messages.linkToolTip),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-target\",\n                    editorOptions: {\n                        label: encode(messages.linkOpenInNewWindow)\n                    },\n                    label: \"\",\n                    editor: \"CheckBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._form.destroy();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    update: function(ui, nodes) {\n        var isLink = this.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n        if (isLink) {\n            toolbar.enable(ui, true);\n        } else {\n            toolbar.enable(ui, false);\n        }\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoDropDownList\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    decorate: function(body) {\n        var component = this.component,\n            dataSource = component.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className: className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        that.editor = editor;\n        that.component = component;\n\n        // must be moved to themes\n        ui.closest(\".k-dropdownlist\").width(options.width);\n\n        component.setOptions({\n            optionLabel: editor.options.messages.formatting,\n            change: () => {\n                var dataItem = component.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = component.dataSource.data(),\n                    optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            }\n        });\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({\n    ui: {\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            highlightFirst: false,\n            autoWidth: true,\n            template: kendo.template(\n                (data) => `<span unselectable=\"on\" style=\"display:block;${data.style || \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n            )\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n        .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n        .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n        .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-image-url\",\n                    label: encode(messages.imageWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-title\",\n                    label: encode(messages.imageAltText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-width\",\n                    label: encode(messages.imageWidth),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-height\",\n                    label: encode(messages.imageHeight),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    ui: {\n        showText: \"both\"\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml,\n            component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        component.one(\"open\", () => {\n            var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n            if (optionLabel.length) {\n                optionLabel.remove();\n            }\n        });\n\n        component.setOptions({\n            dataSource: dataSource,\n            optionLabel: editor.options.messages.insertHtml\n        });\n        component.bind(\"change\", () => {\n            Tool.exec(editor, 'insertHtml', component.value());\n        });\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var component = ui.data(\"kendoDropDownList\");\n        component.close();\n        component.value(null);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({\n    ui: {\n        initialValue: \"Insert HTML\",\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            autoSize: true,\n            highlightFirst: false\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoDropDownList';\n    },\n\n    options: {\n        items: defaultExportAsItems\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, editor) {\n        var tool = this,\n            component = ui.getKendoDropDownList();\n\n        tool.editor = editor;\n\n        component.bind(\"change\", this.changeHandler.bind(this));\n    },\n\n    changeHandler: function(e) {\n        e.sender.value(null);\n        e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        this._exec(e.sender.value());\n    },\n\n    update: function(ui, editor) {\n        var component = ui.data(\"kendoDropDownList\");\n\n        component.close();\n        component.value(null);\n        ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            valuePrimitive: true,\n            value: null,\n            width: \"140px\",\n            highlightFirst: false,\n            autoWidth: true,\n            itemTemplate: (data) => `<span class=\\\"k-link k-menu-link\\\" data-value=\\\"${data.value}\\\">${data.text}</strong></span>`,\n            icon: \"export\",\n            valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n        }\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, editor) {\n        $.extend(this.options, {\n            immutables: editor && editor.options.immutables\n        });\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                toolbar.enable(ui, true);\n                return;\n            }\n        }\n\n        toolbar.enable(ui, false);\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n        .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n        .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-file-url\",\n                    label: encode(messages.fileWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-text\",\n                    label: encode(messages.fileText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-title\",\n                    label: encode(messages.fileTitle),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var that = this;\n        var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        this._editor = editor;\n        this._popup = popup;\n\n        editor.tablePopup = this._popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        btn.appendTo(popup.element);\n        btn.kendoButton({\n            icon: \"table-wizard\"\n        });\n\n        btn.on(\"click\", () => {\n            that._editor.exec(\"tableWizardInsert\");\n        });\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode;\n\n        if (key == keys.ESC) {\n            that._popup.close();\n        } else if (key == keys.DOWN && e.altKey) {\n            that._popup.open();\n            that._setTableSize({ row: 1, col: 1 });\n        } else if (key === keys.ENTER) {\n            setTimeout(() => {\n                that._setTableSize({ row: 1, col: 1 });\n            });\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        if (this._popup) {\n            this._popup.destroy();\n        }\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes),\n            isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar) {\n            toolbar.toggle(ui, isFormatted);\n        }\n\n        if (isTable === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\n\nregisterTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: cellProp.id || null });\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar dialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n            '<ul>' +\n                `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                `<li>${ messages.cellTab }</li>` +\n                `<li>${ messages.accessibilityTab }</li>` +\n            '</ul>' +\n            '<div id=\"k-table-properties\"></div>' +\n            '<div id=\"k-cell-properties\"></div>' +\n            '<div id=\"k-accessibility-properties\"></div>' +\n        '</div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 400;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n        that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n        that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value();\n        tableProperties.id = tableView.id.value();\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.check();\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.check();\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value();\n        cellData.id = cellView.id.value();\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.check();\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value();\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value();\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n        if (property in data) {\n            component.check(data[property]);\n        }\n    },\n\n    _initTextArea: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    destroy: function() {\n        var that = this;\n        that._destroyComponents(this.components);\n\n        delete that.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    },\n\n    _onColumnsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerColumnsNumeric = accessibilityView.headerColumns;\n        var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n        var numberOfColumns = args.sender.value();\n\n        if (numberOfColumns < currentNumberOfColumnsHeaders) {\n            headerColumnsNumeric.value(numberOfColumns);\n        }\n\n        headerColumnsNumeric.max(numberOfColumns);\n    },\n\n    _onRowsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerRowsNumeric = accessibilityView.headerRows;\n        var currentNumberOfRowHeaders = headerRowsNumeric.value();\n        var numberOfRows = args.sender.value();\n\n        if (numberOfRows < currentNumberOfRowHeaders) {\n            headerRowsNumeric.value(numberOfRows);\n        }\n\n        headerRowsNumeric.max(numberOfRows);\n    },\n\n    _createTablePropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-table-properties\");\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        var form;\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n        form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-table-width\",\n                    label: encode(messages.width),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView);\n                        that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    field: \"k-editor-table-height\",\n                    label: encode(messages.height),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView);\n                        that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    field: \"k-editor-table-columns\",\n                    label: encode(messages.columns),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                            \"columns\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onColumnsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    field: \"k-editor-table-rows\",\n                    label: encode(messages.rows),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                            \"rows\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onRowsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    field: \"k-editor-table-cell-spacing\",\n                    label: encode(messages.cellSpacing),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-table-cell-padding\",\n                    label: encode(messages.cellPadding),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding\" />').appendTo(container), \"cellPadding\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-table-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                    }\n                },{\n                    field: \"k-editor-table-bg\",\n                    label: encode(messages.background),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-css-class\",\n                    label: encode(messages.cssClass),\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-id\",\n                    label: encode(messages.id),\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-border-width\",\n                    label: encode(messages.border),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                        that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                    }\n                },{\n                    field: \"k-editor-border-style\",\n                    label: encode(messages.borderStyle),\n                    editor: function(container, options) {\n                        that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                            \"borderStyle\",\n                            tableProperties,\n                            tableView,\n                            borderStyles);\n                    }\n                },{\n                    field: \"k-editor-collapse-borders\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        return form;\n    },\n\n    _createCellPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-cell-properties\");\n        var components = that.components;\n        var cellView = components.cellView = {};\n        var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n        var form;\n\n        that._addUnit(units, cellProperties.widthUnit);\n        that._addUnit(units, cellProperties.heightUnit);\n        form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-selectAllCells\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                    }\n                },{\n                    field: \"k-editor-cell-width\",\n                    label: encode(messages.width),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView);\n                        that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    field: \"k-editor-cell-height\",\n                    label: encode(messages.height),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView);\n                        that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    field: \"k-editor-table-cell-margin\",\n                    label: encode(messages.cellMargin),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-table-cells-padding\",\n                    label: encode(messages.cellPadding),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding\" />').appendTo(container), \"cellPadding\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-cell-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                    }\n                },{\n                    field: \"k-editor-cell-bg\",\n                    label: encode(messages.background),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-cell-css-class\",\n                    label: encode(messages.cssClass),\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-cell-id\",\n                    label: encode(messages.id),\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-cell-border-width\",\n                    label: encode(messages.border),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView);\n                        that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView);\n                    }\n                },{\n                    field: \"k-editor-cell-border-style\",\n                    label: encode(messages.borderStyle),\n                    editor: function(container, options) {\n                        that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                            \"borderStyle\",\n                            cellProperties,\n                            cellView,\n                            borderStyles);\n                    }\n                },{\n                    field: \"k-editor-wrap-text\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-wrap-text\" />').appendTo(container), \"wrapText\", cellProperties, cellView, { label: encode(messages.wrapText) });\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        return form;\n    },\n\n    _createAccessibilityPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-accessibility-properties\");\n        var components = that.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n        var form;\n\n        form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-table-header-rows\",\n                    label: encode(messages.headerRows),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                        \"headerRows\",\n                        tableProperties,\n                        accessibilityView,\n                        {\n                            max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                        });\n                    }\n                },{\n                    field: \"k-editor-table-header-columns\",\n                    label: encode(messages.headerColumns),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                        \"headerColumns\",\n                        tableProperties,\n                        accessibilityView,\n                        {\n                            max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                        });\n                    }\n                },{\n                    field: \"k-editor-table-caption\",\n                    label: encode(messages.caption),\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                    }\n                },{\n                    field: \"k-editor-accessibility-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                    }\n                },{\n                    field: \"k-editor-accessibility-summary\",\n                    label: encode(messages.summary),\n                    editor: function(container, options) {\n                        that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                            rows: 5,\n                            placeholder: messages.tableSummaryPlaceholder\n                        });\n                    }\n                },{\n                    field: \"k-editor-cells-headers\",\n                    label: encode(messages.associateCellsWithHeaders),\n                    editor: function(container, options) {\n                        var element = $(`<select id=\"k-editor-cells-headers\">\n                            <option value=\"none\">${ messages.associateNone }</option>\n                            <option value=\"scope\">${ messages.associateScope }</option>\n                            <option value=\"ids\">${ messages.associateIds }</option>\n                        </select>`).appendTo(container);\n\n                        that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        return form;\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n"]}